//==============================================================================================================================================
//
// ボールスポナー処理
// Author : Atsumu Kuboichi
//
//==============================================================================================================================================

//===========================================================================================================
// ヘッダーインクルード
//===========================================================================================================
#include "ballspawner.h"
#include "boss.h"
#include "enemy.h"
#include "UI.h"

//===========================================================================================================
// コンストラクタ
//===========================================================================================================
CBallSpawner::CBallSpawner() : CGimmick(),
	m_bSpawn(false)
{
}

//===========================================================================================================
// デストラクタ
//===========================================================================================================
CBallSpawner::~CBallSpawner()
{
}

//===========================================================================================================
// 初期化処理
//===========================================================================================================
HRESULT CBallSpawner::Init()
{
	//基底クラス初期化処理
	if (FAILED(CGimmick::Init()))
	{
		return E_FAIL;
	}

	return S_OK;
}

//===========================================================================================================
// 終了処理
//===========================================================================================================
void CBallSpawner::Uninit()
{
	//基底クラス終了処理
	CGimmick::Uninit();
}

//===========================================================================================================
// 解放処理
//===========================================================================================================
void CBallSpawner::Release()
{
	//基底クラス解放処理
	CGimmick::Release();
}

//===========================================================================================================
// 更新処理
//===========================================================================================================
void CBallSpawner::Update()
{
	//基底クラス更新処理
	CGimmick::Update();
}

//===========================================================================================================
// 描画処理
//===========================================================================================================
void CBallSpawner::Draw()
{
}

//===========================================================================================================
// スポーン処理
//===========================================================================================================
void CBallSpawner::Spawn()
{
	//フラグが既にtrueなら処理をしない
	if (m_bSpawn)
	{
		return;
	}

	//拡大率設定
	D3DXVECTOR3 scale(CREATE_SCALE, CREATE_SCALE, CREATE_SCALE);

	//ボールを生成
	CEnemy::Create(GetPos(), GetRot(), scale, CEnemy::TYPE::BALL);

	//生成フラグをtrueにする
	m_bSpawn = true;

	//警告UI生成
	CUI::Create(CUI::TYPE::ESCAPE, { 950.0f, 630.0f }, { 420.0f, 140.0f }, { 0.0f, 0.0f, 0.0f });
}
